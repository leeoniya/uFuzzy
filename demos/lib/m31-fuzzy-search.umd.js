!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t||self).fuzzySearch={})}(this,function(t){var e=/*#__PURE__*/function(){function t(){}return t.ToInt32Array=function(t){for(var e=new Int32Array(t.length),r=0,n=t.length;r<n;r++)e[r]=t[r];return e},t}(),r=/*#__PURE__*/function(){function t(){}return t.getHashCode=function(t){for(var e=5381,r=e,n=0,i=t.length;n<i&&"\0"!=t[n]&&(e=(e<<5)+e^t.charCodeAt(n),n!==i-1&&"\0"!==t[n+1]);n+=2)r=(r<<5)+r^t.charCodeAt(n+1);return e+1566083941*r|0},t}();function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function u(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}var c,d=/*#__PURE__*/function(){function t(t){this.entries=void 0,this.entries=void 0!==t?t:new Map}var e=t.prototype;return e.add=function(t,e){if(this.entries.has(t))throw new Error("A meta entry with key "+t+" is already present.");this.entries.set(t,e)},e.get=function(t){return this.entries.get(t)},e.toJSON=function(){return{entries:Object.fromEntries(this.entries)}},a(t,[{key:"allEntries",get:function(){return this.entries}}])}(),f=/*#__PURE__*/function(){function t(){}return t.mergeMeta=function(t){if(0===t.length)return new d;if(1===t.length)return t[0];for(var e,r=new Map,n=s(t);!(e=n()).done;)for(var i,a=s(e.value.allEntries);!(i=a()).done;){var h=i.value,o=h[0],u=h[1],c=r.get(o);void 0===c?r.set(o,[u]):c.push(u)}for(var f,m=new Map,l=s(r);!(f=l()).done;){var g=f.value,y=g[0],v=g[1];if(1!==v.length)if(v.every(function(t){return"number"==typeof t})){var p=v.reduce(function(t,e){return t+e},0);m.set(y,p)}else for(var S=0;S<v.length;S++)m.set(y+"_"+S,v[S]);else m.set(y,v[0])}return new d(m)},t}(),m=/*#__PURE__*/function(){function t(){}return t.isSurrogate=function(t){var e=t.charCodeAt(0);return e>=55296&&e<=57343},t.isAlphanumeric=function(t){var e=t.charCodeAt(0);return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122},t.isLowerAlpha=function(t){var e=t.charCodeAt(0);return e>=97&&e<=122},t}(),l=/*#__PURE__*/function(){function t(t,e){this.usableSearchers=void 0,this.usableSearchers=new Map;for(var r,n=s(e);!(r=n()).done;){var i=r.value;t.includes(i.type)&&this.usableSearchers.set(i.type,i)}}var e=t.prototype;return e.has=function(t){return this.usableSearchers.has(t)},e.minQuality=function(t){return this.usableSearchers.get(t).minQuality},e.spec=function(t){return this.usableSearchers.get(t)},t}(),g=function(t,e,r){this.matches=void 0,this.query=void 0,this.meta=void 0,this.matches=t,this.query=e,this.meta=r};t.SearcherType=void 0,(c=t.SearcherType||(t.SearcherType={})).Fuzzy="fuzzy",c.Substring="substring",c.Prefix="prefix";var y=function(t,e){this.type=void 0,this.minQuality=void 0,this.type=t,this.minQuality=Math.max(0,e)},v=/*#__PURE__*/function(e){function r(r){return e.call(this,t.SearcherType.Fuzzy,r)||this}return h(r,e),r}(y),p=/*#__PURE__*/function(e){function r(r){return e.call(this,t.SearcherType.Substring,r)||this}return h(r,e),r}(y),S=/*#__PURE__*/function(e){function r(r){return e.call(this,t.SearcherType.Prefix,r)||this}return h(r,e),r}(y),x=function(t,e,r){void 0===e&&(e=10),void 0===r&&(r=[new v(.3),new p(0),new S(0)]),this.string=void 0,this.topN=void 0,this.searchers=void 0,this.string=t,this.topN=Math.max(0,e),this.searchers=r},w=function(t,e){this.removedEntities=void 0,this.meta=void 0,this.removedEntities=t,this.meta=e},T=/*#__PURE__*/function(){function t(){}return t.mergeResults=function(t,e){var r=t.query,n=this.mergeMatches(t.matches,e.matches,r.topN),i=f.mergeMeta([t.meta,e.meta]);return new g(n,r,i)},t.mergeMatches=function(t,e,r){if(0===e.length)return t;if(0===t.length)return e;var n=[].concat(t,e);return n.sort(function(t,e){return t.quality>e.quality?-1:t.quality<e.quality?1:0}),n.length<=r?n:n.slice(0,r)},t}(),z=/*#__PURE__*/function(){function t(t,e,r){this.maxQueryLength=void 0,this.mainSearcher=void 0,this.secondarySearcher=void 0,this.maxQueryLength=t,this.mainSearcher=e,this.secondarySearcher=r}var e=t.prototype;return e.indexEntities=function(t,e,r){return this.secondarySearcher.indexEntities([],e,r),this.mainSearcher.indexEntities(t,e,r)},e.getMatches=function(t){return t.string?(t.string.length>this.maxQueryLength&&(t=new x(t.string.substring(0,this.maxQueryLength),t.topN,t.searchers)),T.mergeResults(this.mainSearcher.getMatches(t),this.secondarySearcher.getMatches(t))):new g([],t,new d)},e.tryGetTerms=function(t){var e=this.mainSearcher.tryGetTerms(t);return null!==e?e:this.secondarySearcher.tryGetTerms(t)},e.getTerms=function(){return this.mainSearcher.getTerms().concat(this.secondarySearcher.getTerms())},e.tryGetEntity=function(t){var e,r;return null!=(e=null!=(r=this.mainSearcher.tryGetEntity(t))?r:this.secondarySearcher.tryGetEntity(t))?e:null},e.getEntities=function(){return this.mainSearcher.getEntities().concat(this.secondarySearcher.getEntities())},e.removeEntities=function(t){for(var e=[],r=0,n=t.length;r<n;r++)(this.mainSearcher.removeEntity(t[r])||this.secondarySearcher.removeEntity(t[r]))&&e.push(t[r]);var i=new d;return new w(e,i)},e.upsertEntities=function(t,e,r){for(var n=[],i=[],a=0,s=t.length;a<s;a++){var h=t[a],o=e(h);this.tryUpdate(h,o,r)||(n.push(o),i.push(h))}return this.removeEntities(n),i.length>0?this.reindexSecondarySearcher(i,e,r):new d},e.reindexSecondarySearcher=function(t,e,r){var n=this.secondarySearcher.getEntities().concat(t);return this.secondarySearcher.indexEntities(n,e,r)},e.tryUpdate=function(t,e,r){return this.tryUpdateSearcher(t,e,r,this.mainSearcher)||this.tryUpdateSearcher(t,e,r,this.secondarySearcher)},e.tryUpdateSearcher=function(t,e,r,n){var i=n.tryGetTerms(e);if(null===i)return!1;if(this.termsAreEqual(i,r(t))){if(!n.replaceEntity(e,t,e))throw new Error("Entity with id "+e+" was not present.");return!0}return!1},e.termsAreEqual=function(t,e){return t===e||null!=t&&null!=e&&t.length===e.length&&t.every(function(t,r){return t===e[r]})},e.removeEntity=function(t){return this.mainSearcher.removeEntity(t)||this.secondarySearcher.removeEntity(t)},e.replaceEntity=function(t,e,r){return this.mainSearcher.replaceEntity(t,e,r)||this.secondarySearcher.replaceEntity(t,e,r)},e.save=function(t){this.mainSearcher.save(t),this.secondarySearcher.save(t)},e.load=function(t){this.mainSearcher.load(t),this.secondarySearcher.load(t)},t}(),I=/*#__PURE__*/function(){function t(t){this.dynamicSearcher=void 0,this.dynamicSearcher=t}var e=t.prototype;return e.removeEntities=function(t){var e=performance.now(),r=this.dynamicSearcher.removeEntities(t),n=Math.round(performance.now()-e);return r.meta.add("removalDuration",n),r},e.upsertEntities=function(t,e,r){var n=performance.now(),i=this.dynamicSearcher.upsertEntities(t,e,r),a=Math.round(performance.now()-n);return i.add("upsertDuration",a),i},e.indexEntities=function(t,e,r){var n=performance.now(),i=this.dynamicSearcher.indexEntities(t,e,r),a=Math.round(performance.now()-n);return i.add("indexingDurationTotal",a),i},e.getMatches=function(t){var e=performance.now(),r=this.dynamicSearcher.getMatches(t),n=Math.round(performance.now()-e);return r.meta.add("queryDuration",n),r},e.tryGetEntity=function(t){return this.dynamicSearcher.tryGetEntity(t)},e.getEntities=function(){return this.dynamicSearcher.getEntities()},e.tryGetTerms=function(t){return this.dynamicSearcher.tryGetTerms(t)},e.getTerms=function(){return this.dynamicSearcher.getTerms()},e.removeEntity=function(t){return this.dynamicSearcher.removeEntity(t)},e.replaceEntity=function(t,e,r){return this.dynamicSearcher.replaceEntity(t,e,r)},e.save=function(t){this.dynamicSearcher.save(t)},e.load=function(t){this.dynamicSearcher.load(t)},t}(),b=function(t,e,r){this.entity=void 0,this.quality=void 0,this.matchedString=void 0,this.entity=t,this.quality=e,this.matchedString=r},C=function(t){this.query=void 0,this.matchedIndexes=new Set,this.matches=[],this.meta=[],this.query=t},M=function(t,e,r){void 0===e&&(e=0),this.string=void 0,this.minQuality=void 0,this.searcherType=void 0,this.string=t,this.minQuality=Math.max(0,Math.min(1,e)),this.searcherType=r},E=/*#__PURE__*/function(){function r(e,r){this.stringSearcher=void 0,this.searcherTypes=void 0,this.entities=void 0,this.idToIndex=void 0,this.terms=void 0,this.termIndexToEntityIndex=void 0,this.entityIndexToFirstTermIndex=void 0,this.searchersAndQualityOffsets=[{searcherType:t.SearcherType.Prefix,qualityOffset:2},{searcherType:t.SearcherType.Substring,qualityOffset:1},{searcherType:t.SearcherType.Fuzzy,qualityOffset:0}],this.stringSearcher=e,this.searcherTypes=r,this.entities=[],this.idToIndex=new Map,this.terms=[],this.termIndexToEntityIndex=new Int32Array(0),this.entityIndexToFirstTermIndex=new Int32Array(0)}var n=r.prototype;return n.indexEntities=function(t,r,n){var i=this;this.entities=[].concat(t),this.idToIndex=new Map,this.terms=[];for(var a=[],s=[],h=function(e){var h;i.idToIndex.set(r(t[e]),e);var o=n(t[e]);s.push(i.terms.length),(h=i.terms).push.apply(h,o),a.push.apply(a,o.map(function(){return e}))},o=0,u=t.length;o<u;o++)h(o);this.termIndexToEntityIndex=e.ToInt32Array(a),this.entityIndexToFirstTermIndex=e.ToInt32Array(s);var c=this.stringSearcher.index(this.terms);return c.add("numberOfEntities",this.entities.length),c.add("numberOfTerms",this.terms.length),c},n.getMatches=function(t){for(var e,r=new C(t),n=new l(this.searcherTypes,t.searchers),i=s(this.searchersAndQualityOffsets);!(e=i()).done;){var a=e.value,h=a.searcherType,o=a.qualityOffset;if(t.topN==r.matches.length)break;n.has(h)&&this.addMatchesFromSearcher(r,n.spec(h),o)}var u=f.mergeMeta(r.meta);return new g(r.matches,t,u)},n.addMatchesFromSearcher=function(t,e,r){var n=Math.max(0,e.minQuality-r);if(!(n>1)){var i=new M(t.query.string,n,e.type),a=this.stringSearcher.getMatches(i);this.addMatchesFromResult(t,a,r)}},n.addMatchesFromResult=function(t,e,r){if(t.meta.push(e.meta),0!==t.query.topN)for(var n=0,i=e.matches.length;n<i;n++){var a=e.matches[n],s=this.termIndexToEntityIndex[a.index];if(!t.matchedIndexes.has(s)&&null!==this.entities[s]&&(t.matchedIndexes.add(s),t.matches.push(new b(this.entities[s],a.quality+r,this.terms[a.index])),t.matches.length===t.query.topN))break}},n.tryGetEntity=function(t){var e=this.idToIndex.get(t);return void 0===e?null:this.entities[e]},n.getEntities=function(){return this.entities.filter(function(t){return null!==t})},n.tryGetTerms=function(t){var e=this.idToIndex.get(t);return void 0===e?null:this.terms.slice(this.entityIndexToFirstTermIndex[e],e===this.entities.length-1?this.terms.length:this.entityIndexToFirstTermIndex[e+1])},n.getTerms=function(){for(var t=[],e=0,r=this.termIndexToEntityIndex.length;e<r;e++)null!==this.entities[this.termIndexToEntityIndex[e]]&&t.push(this.terms[e]);return t},n.removeEntity=function(t){var e=this.idToIndex.get(t);return void 0!==e&&(this.entities[e]=null,this.idToIndex.delete(t),!0)},n.replaceEntity=function(t,e,r){var n=this.idToIndex.get(t);return void 0!==n&&(this.entities[n]=e,this.idToIndex.delete(t),this.idToIndex.set(r,n),!0)},n.save=function(t){t.add(this.entities),t.add(this.idToIndex),t.add(this.terms),t.add(this.termIndexToEntityIndex),t.add(this.entityIndexToFirstTermIndex),this.stringSearcher.save(t)},n.load=function(t){this.entities=t.get(),this.idToIndex=t.get(),this.terms=t.get(),this.termIndexToEntityIndex=t.get(),this.entityIndexToFirstTermIndex=t.get(),this.stringSearcher.load(t)},r}(),A=function(t,e){this.strings=void 0,this.meta=void 0,this.strings=t,this.meta=e},N=/*#__PURE__*/function(){function t(t,e){this.treatCharacterAsSpace=void 0,this.allowCharacter=void 0,this.numberOfSurrogateCharacters=0,this.treatCharacterAsSpace=t,this.allowCharacter=e}var e=t.prototype;return e.normalize=function(t){for(var e=new Array(t.length),r=0,n=!1,i=!1,a=0,s=t.length;a<s;a++){var h=this.getNormalizedCharacter(t[a]);""!==h&&(" "===h?n=!0:(n&&i&&(e[r++]=" "),e[r++]=h,i=!0,n=!1))}return i?e.join(""):""},e.getNormalizedCharacter=function(t){return" "===t||this.treatCharacterAsSpace(t)?" ":this.isSurrogate(t)||!this.allowCharacter(t)?"":t.toLowerCase()},e.isSurrogate=function(t){return!!m.isSurrogate(t)&&(this.numberOfSurrogateCharacters++,!0)},e.normalizeBulk=function(t){var e=this;this.numberOfSurrogateCharacters=0;var r=t.map(function(t){return e.normalize(t)}),n=new d;return n.add("numberOfSurrogateCharacters",this.numberOfSurrogateCharacters),new A(r,n)},t}(),q=/*#__PURE__*/function(){function t(t){this.normalizationFunction=void 0,this.normalizationFunction=t}var e=t.prototype;return e.normalize=function(t){return this.normalizationFunction(t)},e.normalizeBulk=function(t){var e=this,r=t.map(function(t){return e.normalize(t)});return new A(r,new d)},t}(),O=/*#__PURE__*/function(){function t(t){this.normalizers=void 0,this.normalizers=t}var e=t.prototype;return e.normalize=function(t){for(var e=0,r=this.normalizers.length;e<r;e++)t=this.normalizers[e].normalize(t);return t},e.normalizeBulk=function(t){for(var e=new d,r=0,n=this.normalizers.length;r<n;r++){var i=this.normalizers[r].normalizeBulk(t);t=i.strings;for(var a,h=s(i.meta.allEntries);!(a=h()).done;){var o=a.value;e.add(o[0],o[1])}}return new A(t,e)},t}(),Q=/*#__PURE__*/function(){function t(){}var e=t.prototype;return e.normalize=function(t){return t||""},e.normalizeBulk=function(t){var e=this,r=t.map(function(t){return e.normalize(t)});return new A(r,new d)},t}(),D=/*#__PURE__*/function(){function t(t,e){this.normalizeVariationsAndInput=void 0,this.replacements=void 0,this.normalizeVariationsAndInput=e,this.replacements=[];for(var r,n=s(t);!(r=n()).done;){for(var i,a=r.value,h=new Map,o=s(a);!(i=o()).done;)for(var u,c=i.value,d=c[0],f=s(c[1]);!(u=f()).done;){var m=e(u.value);h.set(m,d)}this.replacements.push(h)}}var e=t.prototype;return e.normalize=function(t){t=this.normalizeVariationsAndInput(t);for(var e=new Array(t.length),r=0,n=0,i=t.length;n<i;n++)for(var a,h=s(this.replacements);!(a=h()).done;){var o=a.value.get(t[n]);if(void 0!==o){e[r++]=o;break}e[r++]=t[n]}return e.join("")},e.normalizeBulk=function(t){var e=this,r=t.map(function(t){return e.normalize(t)});return new A(r,new d)},t}(),F=/*#__PURE__*/function(){function t(){}return t.create=function(t){var e=new Q,r=new D(t.replacements,function(t){return t.toLowerCase().normalize("NFKC")}),n=new q(function(t){return t.normalize("NFKD")}),i=new N(t.treatCharacterAsSpace,t.allowCharacter);return new O([e,r,n,i])},t}(),R=function(t,e){this.index=void 0,this.quality=void 0,this.index=t,this.quality=e},P=function(t,e,r){this.matches=void 0,this.query=void 0,this.meta=void 0,this.matches=t,this.query=e,this.meta=r},k=/*#__PURE__*/function(){function t(t){this.stringSearcher=void 0,this.distinctMapping=void 0,this.sortMapping=void 0,this.stringSearcher=t,this.distinctMapping=new Int32Array(0),this.sortMapping=new Int32Array(0)}var r=t.prototype;return r.index=function(t){var r=t.map(function(t,e){return{term:t,index:e}});r.sort(function(t,e){return t.term<e.term?-1:t.term>e.term?1:0}),this.sortMapping=new Int32Array(r.length);for(var n=0,i=r.length;n<i;n++)this.sortMapping[n]=r[n].index;for(var a=[],s=[],h=0,o=null,u=0,c=r.length;u<c;u++){var d=r[u].term;d!=o&&(a[h]=d,s[h]=u,h++),o=d}s[h++]=r.length,this.distinctMapping=e.ToInt32Array(s);var f=this.stringSearcher.index(a);return f.add("numberOfDistinctTerms",a.length),f},r.getMatches=function(t){var e=this,r=this.stringSearcher.getMatches(t),n=new Array(r.matches.length),i=0;return r.matches.forEach(function(t){for(var r=e.distinctMapping[t.index+1],a=e.distinctMapping[t.index];a<r;a++)n[i++]=new R(e.sortMapping[a],t.quality)}),new P(n,t,r.meta)},r.save=function(t){t.add(this.distinctMapping),t.add(this.sortMapping),this.stringSearcher.save(t)},r.load=function(t){this.distinctMapping=t.get(),this.sortMapping=t.get(),this.stringSearcher.load(t)},t}(),G=/*#__PURE__*/function(){function e(t,e){this.entitySearcher=void 0,this.searcherTypes=void 0,this.entitySearcher=t,this.searcherTypes=e}var r=e.prototype;return r.indexEntities=function(t,e,r){return this.entitySearcher.indexEntities(t,e,r)},r.getMatches=function(e){var r=new l(this.searcherTypes,e.searchers);if(e.topN>200)return this.entitySearcher.getMatches(e);if(e.string.length<=3&&r.has(t.SearcherType.Prefix)&&r.minQuality(t.SearcherType.Prefix)<2.2){var n=new x(e.string,e.topN,[new S(2.3)]),i=this.entitySearcher.getMatches(n);if(i.matches.length==e.topN)return new g(i.matches,e,i.meta)}if(e.string.length<=3&&!r.has(t.SearcherType.Prefix)&&r.has(t.SearcherType.Substring)&&r.minQuality(t.SearcherType.Substring)<1.2){var a=new x(e.string,e.topN,[new p(1.3)]),s=this.entitySearcher.getMatches(a);if(s.matches.length==e.topN)return new g(s.matches,e,s.meta)}return this.entitySearcher.getMatches(e)},r.tryGetEntity=function(t){return this.entitySearcher.tryGetEntity(t)},r.getEntities=function(){return this.entitySearcher.getEntities()},r.tryGetTerms=function(t){return this.entitySearcher.tryGetTerms(t)},r.getTerms=function(){return this.entitySearcher.getTerms()},r.removeEntity=function(t){return this.entitySearcher.removeEntity(t)},r.replaceEntity=function(t,e,r){return this.entitySearcher.replaceEntity(t,e,r)},r.save=function(t){return this.entitySearcher.save(t)},r.load=function(t){return this.entitySearcher.load(t)},e}(),L=/*#__PURE__*/function(){function t(){this.ids=void 0,this.frequencies=void 0,this.ids=[],this.frequencies=[]}var r=t.prototype;return r.addId=function(t,e){this.ids.push(t),this.frequencies.push(e)},r.seal=function(){this.ids=e.ToInt32Array(this.ids),this.frequencies=e.ToInt32Array(this.frequencies)},r.save=function(t){t.add(this.ids),t.add(this.frequencies)},r.load=function(t){this.ids=t.get(),this.frequencies=t.get()},a(t,[{key:"length",get:function(){return this.ids.length}}])}(),j=/*#__PURE__*/function(){function t(){this.ngramToTermIds=void 0,this.ngramToTermIds=new Map}var e=t.prototype;return e.add=function(t,e,r){var n=this.ngramToTermIds.get(t);n||(n=new L,this.ngramToTermIds.set(t,n)),n.addId(e,r)},e.seal=function(){for(var t,e=s(this.ngramToTermIds.values());!(t=e()).done;)t.value.seal()},e.getIds=function(t){return this.ngramToTermIds.get(t)},e.save=function(t){t.add(this.ngramToTermIds.size);for(var e,r=s(this.ngramToTermIds);!(e=r()).done;){var n=e.value,i=n[1];t.add(n[0]),i.save(t)}},e.load=function(t){for(var e=t.get(),r=0;r<e;r++){var n=t.get(),i=new L;i.load(t),this.ngramToTermIds.set(n,i)}},a(t,[{key:"size",get:function(){return this.ngramToTermIds.size}}])}(),U=/*#__PURE__*/function(){function t(){}return t.ComputeJaccardCoefficient=function(t,e,r){return r/(t+e-r)},t.ComputeOverlapMaxCoefficient=function(t,e,r){return r/Math.max(t,e)},t}(),B=/*#__PURE__*/function(){function t(t){this.ngramComputer=void 0,this.invertedIndex=void 0,this.numberOfNgrams=void 0,this.commonNgramCounts=void 0,this.ngramComputer=t,this.invertedIndex=new j,this.numberOfNgrams=new Int32Array(0),this.commonNgramCounts=new Int32Array(0)}var e=t.prototype;return e.index=function(t){var e=performance.now();this.invertedIndex=new j,this.commonNgramCounts=new Int32Array(t.length),this.numberOfNgrams=new Int32Array(t.length);for(var r=0,n=0,i=t.length;n<i;n++){var a=t[n];if(this.isValidTerm(a)){var h=this.ngramComputer.computeNgrams(a);this.numberOfNgrams[n]=h.length;for(var o,u=s(this.getNgramsToFrequency(h));!(o=u()).done;){var c=o.value;this.invertedIndex.add(c[0],n,c[1])}}else this.numberOfNgrams[n]=0,r++}this.invertedIndex.seal();var f=Math.round(performance.now()-e),m=new d;return m.add("numberOfInvalidTerms",r),m.add("indexingDurationFuzzySearcher",f),m},e.isValidTerm=function(t){return null!=t&&""!==t.trim()},e.getMatches=function(t){if(0===this.invertedIndex.size)return new P([],t,new d);var e=this.ngramComputer.computeNgrams(t.string),r=this.getNgramsToFrequency(e),n=e.length;this.computeCommonNgramCounts(r);var i=this.getMatchesFromCommonNgrams(n,t.minQuality);return new P(i,t,new d)},e.computeCommonNgramCounts=function(t){this.commonNgramCounts.fill(0);for(var e,r=s(t);!(e=r()).done;){var n=e.value,i=n[1],a=this.invertedIndex.getIds(n[0]);if(null!=a)for(var h=0,o=a.length;h<o;h++)this.commonNgramCounts[a.ids[h]]+=Math.min(i,a.frequencies[h])}},e.getNgramsToFrequency=function(t){for(var e=new Map,r=0,n=t.length;r<n;r++){var i=t[r],a=e.get(i);e.set(i,void 0!==a?a+1:1)}return e},e.getMatchesFromCommonNgrams=function(t,e){for(var r=[],n=0,i=this.numberOfNgrams.length;n<i;n++){var a=U.ComputeOverlapMaxCoefficient(t,this.numberOfNgrams[n],this.commonNgramCounts[n]);a>e&&r.push(new R(n,a))}return r},e.save=function(t){this.invertedIndex.save(t),t.add(this.numberOfNgrams)},e.load=function(t){this.invertedIndex=new j,this.invertedIndex.load(t),this.numberOfNgrams=t.get(),this.commonNgramCounts=new Int32Array(this.numberOfNgrams.length)},t}(),H=/*#__PURE__*/function(){function t(t,e){this.stringSearcher=void 0,this.penaltyFactor=void 0,this.hashCodes=void 0,this.stringSearcher=t,this.penaltyFactor=1-e,this.hashCodes=new Int32Array(0)}var e=t.prototype;return e.index=function(t){this.hashCodes=new Int32Array(t.length);for(var e=0,n=t.length;e<n;e++)this.hashCodes[e]=r.getHashCode(t[e]);return this.stringSearcher.index(t)},e.getMatches=function(t){var e=this,n=r.getHashCode(t.string),i=this.stringSearcher.getMatches(t),a=i.matches.map(function(t){return e.penalizeMatch(t,n)}).filter(function(e){return e.quality>=t.minQuality});return new P(a,i.query,i.meta)},e.penalizeMatch=function(t,e){return t.quality*=this.hashCodes[t.index]===e?1:this.penaltyFactor,t},e.save=function(t){t.add(this.hashCodes),this.stringSearcher.save(t)},e.load=function(t){this.hashCodes=t.get(),this.stringSearcher.load(t)},t}(),V=/*#__PURE__*/function(){function t(t,e){this.ngramN=void 0,this.transformNgram=void 0,this.ngramN=t,this.transformNgram=null!=e?e:function(t){return t}}var e=t.prototype;return e.computeNgrams=function(t){if(0===t.length)return[];if(t.length<=this.ngramN){var e=this.transformNgram(t);return e?[e]:[]}for(var r=[],n=0,i=this.maximumNumberOfNgrams(t);n<i;n++){var a=this.transformNgram(t.substring(n,n+this.ngramN));a&&r.push(a)}return r},e.maximumNumberOfNgrams=function(t){return Math.max(t.length-this.ngramN+1,t.length>0?1:0)},t}(),$=/*#__PURE__*/function(){function t(t,e,r){this.paddingLeft=void 0,this.paddingRight=void 0,this.paddingMiddle=void 0,this.paddingLeft=t,this.paddingRight=e,this.paddingMiddle=r}var e=t.prototype;return e.normalize=function(t){return t?""+this.paddingLeft+t.split(" ").join(this.paddingMiddle)+this.paddingRight:t},e.normalizeBulk=function(t){var e=this,r=t.map(function(t){return e.normalize(t)}),n=new d;return new A(r,n)},t}(),_=function(){};_.Value=new Map([["a",["ᶏ","ⱥ","ɑ","ᴀ","ɐ","ɒ"]],["aa",["å","ꜳ"]],["ae",["ä","æ","ᴁ","ᴭ","ᵆ","ǽ","ǣ","ᴂ"]],["ao",["ꜵ"]],["au",["ꜷ"]],["av",["ꜹ","ꜻ"]],["ay",["ꜽ"]],["b",["ƀ","ɓ","ƃ","ᵬ","ᶀ","ʙ"]],["c",["ȼ","ƈ","ɕ","ᴄ","ꜿ","ↄ"]],["d",["đ","ð","ɖ","ɗ","ƌ","ᵭ","ᶁ","ᶑ","ȡ","ᴅ","ꝺ"]],["db",["ȸ"]],["e",["ᶒ","ɇ","ⱸ","ᴇ","ə","ǝ","ɛ"]],["eo",["ᴔ"]],["f",["ƒ","ᵮ","ᶂ","ꜰ","ꝼ"]],["g",["ǥ","ɠ","ᶃ","ɢ","ȝ","ŋ","ꞡ","ᵹ","ꝿ"]],["h",["ħ","ⱨ","ɦ","ʜ","̃","ɧ","ⱶ","ɥ"]],["hv",["ƕ"]],["i",["ɨ","ᵻ","ᶖ","ı","ɪ","ɩ"]],["j",["ɉ","ȷ","ʝ","ɟ","ʄ","ᴊ"]],["k",["ƙ","ⱪ","ᶄ","ꝁ","ᴋ","ꝃ","ꝅ","ꞣ"]],["l",["ł","ƚ","ⱡ","ɫ","ɬ","ᶅ","ɭ","ȴ","ʟ","ꝉ","ꞁ","ꝇ"]],["m",["ᵯ","ᶆ","ɱ","ᴍ","ɯ"]],["n",["ɲ","ƞ","ᵰ","ᶇ","ɳ","ȵ","ɴ","ꞑ","ꞥ"]],["o",["ø","ǿ","ɵ","ɔ","ⱺ","ᴏ","ꝋ","ꝍ"]],["oe",["ö","œ"]],["oi",["ƣ"]],["oo",["ꝏ"]],["ou",["ȣ"]],["p",["ᵽ","ƥ","ᵱ","ᶈ","ᴘ","ƿ","ꝑ","ꝓ","ꝕ"]],["q",["ɋ","ʠ","ꝗ","ꝙ"]],["qp",["ȹ"]],["r",["ɍ","ɽ","ꝛ","ᵲ","ᶉ","ɼ","ɾ","ᵳ","ʀ","ɹ","ʁ","ꞧ","ꞃ"]],["s",["ᵴ","ᶊ","ʂ","ȿ","ꜱ","ʃ","ꞩ","ꞅ","ſ"]],["ss",["ß"]],["t",["ŧ","ⱦ","ƭ","ʈ","ᵵ","ƫ","ȶ","ᴛ","ꞇ"]],["th",["þ"]],["tz",["ꜩ"]],["u",["ʉ","ʊ","ᵾ","ᴜ","ᶙ"]],["ue",["ü","ᵫ"]],["v",["ʋ","ᶌ","ⱱ","ⱴ","ᴠ","ʌ","ꝟ"]],["vy",["ꝡ"]],["w",["ⱳ","ᴡ","ʍ"]],["x",["ᶍ"]],["y",["ɏ","ƴ","ʏ","ỿ"]],["z",["ƶ","ȥ","ⱬ","ᵶ","ᶎ","ʐ","ʑ","ɀ","ᴢ","ʒ","ƹ","ꝣ"]]]);var K,J=/*#__PURE__*/function(){function t(t,e,r){this.replacements=void 0,this.treatCharacterAsSpace=void 0,this.allowCharacter=void 0,this.replacements=t,this.treatCharacterAsSpace=e,this.allowCharacter=r}return t.createDefaultConfig=function(){var e=new Set(["_","-","–","/",",","\t"]);return new t([_.Value],function(t){return e.has(t)},function(t){return m.isAlphanumeric(t)})},t}(),W=/*#__PURE__*/function(){function t(t,e,r){void 0===r&&(r="normalizationDuration"),this.stringSearcher=void 0,this.normalizer=void 0,this.normalizationDurationMetaKey=void 0,this.stringSearcher=t,this.normalizer=e,this.normalizationDurationMetaKey=r}var e=t.prototype;return e.index=function(t){var e=performance.now(),r=this.normalizer.normalizeBulk(t),n=Math.round(performance.now()-e),i=this.stringSearcher.index(r.strings);i.add(this.normalizationDurationMetaKey,n);for(var a,h=s(r.meta.allEntries);!(a=h()).done;){var o=a.value;i.add(o[0],o[1])}return i},e.getMatches=function(t){var e=new M(this.normalizer.normalize(t.string),t.minQuality,t.searcherType),r=this.stringSearcher.getMatches(e);return new P(r.matches,t,r.meta)},e.save=function(t){this.stringSearcher.save(t)},e.load=function(t){this.stringSearcher.load(t)},t}(),X=/*#__PURE__*/function(){function t(t){this.suffixArraySearcher=void 0,this.suffixArraySearcher=t}var e=t.prototype;return e.index=function(t){return this.suffixArraySearcher.index(t)},e.getMatches=function(t){if(!t.string)return new P([],t,new d);var e=this.modifyQueryString(t.string),r=new M(e,t.minQuality,t.searcherType);return this.suffixArraySearcher.getMatches(r,t.string.length)},e.modifyQueryString=function(t){return""+this.suffixArraySearcher.separator+t},e.save=function(t){this.suffixArraySearcher.save(t)},e.load=function(t){this.suffixArraySearcher.load(t)},t}(),Y=/*#__PURE__*/function(){function e(t,e,r){this.prefixSearcher=void 0,this.substringSearcher=void 0,this.fuzzySearcher=void 0,this.prefixSearcher=t,this.substringSearcher=e,this.fuzzySearcher=r}var r=e.prototype;return r.index=function(t){var e=[];if(this.prefixSearcher&&!this.substringSearcher){var r=this.prefixSearcher.index(t);e.push(r)}if(this.substringSearcher){var n=this.substringSearcher.index(t);e.push(n)}if(this.fuzzySearcher){var i=this.fuzzySearcher.index(t);e.push(i)}return f.mergeMeta(e)},r.getMatches=function(e){if(!e.searcherType)throw new Error("SearcherSwitch requires a searcher type.");switch(e.searcherType){case t.SearcherType.Prefix:if(!this.prefixSearcher)throw new Error("No prefix searcher has been indexed.");return this.prefixSearcher.getMatches(e);case t.SearcherType.Substring:if(!this.substringSearcher)throw new Error("No substring searcher has been indexed.");return this.substringSearcher.getMatches(e);case t.SearcherType.Fuzzy:if(!this.fuzzySearcher)throw new Error("No fuzzy searcher has been indexed.");return this.fuzzySearcher.getMatches(e);default:throw new Error("Unknown searcher type: "+e.searcherType)}},r.save=function(t){this.prefixSearcher&&!this.substringSearcher&&this.prefixSearcher.save(t),this.substringSearcher&&this.substringSearcher.save(t),this.fuzzySearcher&&this.fuzzySearcher.save(t)},r.load=function(t){this.prefixSearcher&&!this.substringSearcher&&this.prefixSearcher.load(t),this.substringSearcher&&this.substringSearcher.load(t),this.fuzzySearcher&&this.fuzzySearcher.load(t)},e}();t.SortOrder=void 0,(K=t.SortOrder||(t.SortOrder={})).QualityAndIndex="qualityAndIndex",K.QualityAndMatchedString="qualityAndMatchedString";var Z=/*#__PURE__*/function(){function e(t,e){this.sortOrder=void 0,this.entitySearcher=void 0,this.collator=new Intl.Collator(void 0,{numeric:!0}),this.sortOrder=t,this.entitySearcher=e}var r=e.prototype;return r.indexEntities=function(t,e,r){return this.entitySearcher.indexEntities(t,e,r)},r.getMatches=function(e){var r=this.entitySearcher.getMatches(e);switch(this.sortOrder){case t.SortOrder.QualityAndIndex:return r;case t.SortOrder.QualityAndMatchedString:return this.sortMatchesByQualityAndMatchedString(r.matches),r;default:throw new Error("Unsupported sort order: "+this.sortOrder)}},r.sortMatchesByQualityAndMatchedString=function(t){var e=this;t.sort(function(t,r){return t.quality>r.quality?-1:t.quality<r.quality?1:e.collator.compare(t.matchedString,r.matchedString)})},r.tryGetEntity=function(t){return this.entitySearcher.tryGetEntity(t)},r.getEntities=function(){return this.entitySearcher.getEntities()},r.tryGetTerms=function(t){return this.entitySearcher.tryGetTerms(t)},r.getTerms=function(){return this.entitySearcher.getTerms()},r.save=function(t){this.entitySearcher.save(t)},r.load=function(t){this.entitySearcher.load(t)},r.removeEntity=function(t){return this.entitySearcher.removeEntity(t)},r.replaceEntity=function(t,e,r){return this.entitySearcher.replaceEntity(t,e,r)},e}(),tt=/*#__PURE__*/function(){function t(t){this.stringSearcher=void 0,this.stringSearcher=t}var e=t.prototype;return e.index=function(t){return this.stringSearcher.index(t)},e.getMatches=function(t){var e=this.stringSearcher.getMatches(t);return e.matches.sort(this.compareMatchesByQualityAndIndex),e},e.compareMatchesByQualityAndIndex=function(t,e){return t.quality>e.quality?-1:t.quality<e.quality?1:t.index<e.index?-1:t.index>e.index?1:0},e.save=function(t){this.stringSearcher.save(t)},e.load=function(t){this.stringSearcher.load(t)},t}(),et=/*#__PURE__*/function(){function t(){}return t.compareOrdinal=function(t,e,r,n,i){for(var a=Math.min(e+i,t.length),s=Math.min(n+i,r.length),h=e,o=n;h<a&&o<s;){var u=t.charCodeAt(h),c=r.charCodeAt(o);if(u<c)return-1;if(u>c)return 1;h++,o++}var d=a-e,f=s-n;return d===f?0:d<f?-1:1},t}(),rt=/*#__PURE__*/function(){function t(t){this.inputString=void 0,this.eoc=2147483647,this.sa=void 0,this.isa=void 0,this.chainHeadsDict=void 0,this.chainStack=[],this.subChains=[],this.nextRank=1,this.inputString=t;var e=t.length;this.sa=new Int32Array(e),this.isa=new Int32Array(e),this.chainHeadsDict=new Map}t.create=function(e){if(null==e)throw new Error("Input string cannot be null.");var r=new t(e);return r.FormInitialChains(),r.BuildSufixArray(),r.sa};var e=t.prototype;return e.FormInitialChains=function(){this.FindInitialChains(),this.SortAndPushSubchains()},e.FindInitialChains=function(){for(var t=0;t<this.inputString.length;t++){var e=this.inputString.charCodeAt(t),r=this.chainHeadsDict.get(e);this.isa[t]=void 0!==r?r:this.eoc,this.chainHeadsDict.set(e,t)}for(var n,i=s(this.chainHeadsDict.values());!(n=i()).done;){var a=new it(n.value,1);this.subChains.push(a)}},e.BuildSufixArray=function(){for(;this.chainStack.length>0;){var t=this.chainStack.pop();this.isa[t.head]===this.eoc?this.RankSuffix(t.head):this.RefineChainWithInductionSorting(t)}},e.RankSuffix=function(t){this.isa[t]=-this.nextRank,this.sa[this.nextRank-1]=t,this.nextRank++},e.RefineChainWithInductionSorting=function(t){var e=[];for(this.chainHeadsDict.clear(),this.subChains=[];t.head!==this.eoc;){var r=this.isa[t.head];if(t.head+t.length>this.inputString.length-1)this.RankSuffix(t.head);else if(this.isa[t.head+t.length]<0){var n=new nt(t.head,-this.isa[t.head+t.length]);e.push(n)}else this.ExtendChain(t);t.head=r}this.SortAndPushSubchains(),this.SortAndRankNotedSuffixes(e)},e.ExtendChain=function(t){var e=this.inputString.charCodeAt(t.head+t.length);if(this.chainHeadsDict.has(e))this.isa[this.chainHeadsDict.get(e)]=t.head,this.isa[t.head]=this.eoc;else{this.isa[t.head]=this.eoc;var r=new it(t.head,t.length+1);this.subChains.push(r)}this.chainHeadsDict.set(e,t.head)},e.SortAndRankNotedSuffixes=function(t){t.sort(function(t,e){return t.rank-e.rank});for(var e=0;e<t.length;e++)this.RankSuffix(t[e].head)},e.SortAndPushSubchains=function(){var t=this;this.subChains.sort(function(e,r){var n=Math.min(e.length,r.length);return et.compareOrdinal(t.inputString,e.head,t.inputString,r.head,n)});for(var e=this.subChains.length-1;e>=0;e--)this.chainStack.push(this.subChains[e])},t}(),nt=function(t,e){this.head=void 0,this.rank=void 0,this.head=t,this.rank=e},it=function(t,e){this.head=void 0,this.length=void 0,this.head=t,this.length=e},at=/*#__PURE__*/function(){function t(t){this.separator=void 0,this.str=void 0,this.suffixArray=void 0,this.indexToTermIndex=void 0,this.termLengths=void 0,this.separator=t,this.str="",this.suffixArray=new Int32Array(0),this.indexToTermIndex=new Int32Array(0),this.termLengths=new Int32Array(0)}var e=t.prototype;return e.index=function(t){var e=performance.now();this.str=t.length>0?this.separator+t.join(this.separator)+this.separator:"",this.suffixArray=rt.create(this.str),this.indexToTermIndex=new Int32Array(this.suffixArray.length),this.termLengths=new Int32Array(t.length);for(var r=0,n=0;n<t.length;n++){this.termLengths[n]=t[n].length;for(var i=0;i<=t[n].length;i++)this.indexToTermIndex[r++]=n}this.indexToTermIndex[r++]=-1;var a=Math.round(performance.now()-e),s=new d;return s.add("indexingDurationSuffixArraySearcher",a),s},e.getMatches=function(t,e){if(!t.string)return new P([],t,new d);for(var r=this.GetPositionsInSuffixArray(t.string),n=r[0],i=r[1],a=new Int32Array(i-n),s=new Set,h=0,o=n;o<i;o++){var u=this.indexToTermIndex[this.suffixArray[o]];s.has(u)||(s.add(u),a[h++]=u)}var c=[];e=null!=e?e:t.string.length;for(var f=0,m=0;m<h;m++)(f=this.computeQuality(e,this.termLengths[a[m]]))>t.minQuality&&c.push(new R(a[m],f));return new P(c,t,new d)},e.computeQuality=function(t,e){return t/e},e.GetPositionsInSuffixArray=function(t){for(var e=0,r=this.suffixArray.length,n=0;e<r;)n=Math.floor((e+r)/2),et.compareOrdinal(t,0,this.str,this.suffixArray[n],t.length)>0?e=n+1:r=n;var i=e;for(r=this.suffixArray.length;e<r;)n=Math.floor((e+r)/2),0==et.compareOrdinal(t,0,this.str,this.suffixArray[n],t.length)?e=n+1:r=n;return[i,r]},e.save=function(t){t.add(this.str),t.add(this.suffixArray),t.add(this.indexToTermIndex),t.add(this.termLengths)},e.load=function(t){this.str=t.get(),this.suffixArray=t.get(),this.indexToTermIndex=t.get(),this.termLengths=t.get()},t}(),st=/*#__PURE__*/function(){function e(){}return e.createSearcher=function(t){var e=this.createDefaultNormalizer(t),r=this.tryCreateFuzzySearcher(t),n=this.tryCreateSubstringSearcher(t),i=this.tryCreatePrefixSearcher(t,n),a=new Y(i,n,r);a=new k(a),a=new tt(a),a=new W(a,e,"normalizationDurationDefault");var s=new E(a,t.searcherTypes);return s=new G(s,t.searcherTypes),new Z(t.sortOrder,s)},e.createDefaultNormalizer=function(t){var e=new Set;t.fuzzySearchConfig&&(t.fuzzySearchConfig.paddingLeft.split("").forEach(function(t){return e.add(t)}),t.fuzzySearchConfig.paddingRight.split("").forEach(function(t){return e.add(t)}),t.fuzzySearchConfig.paddingMiddle.split("").forEach(function(t){return e.add(t)})),t.substringSearchConfig&&t.substringSearchConfig.suffixArraySeparator.split("").forEach(function(t){return e.add(t)});var r=new J(t.normalizerConfig.replacements,t.normalizerConfig.treatCharacterAsSpace,function(r){return t.normalizerConfig.allowCharacter(r)&&!e.has(r)});return F.create(r)},e.tryCreateFuzzySearcher=function(e){if(!e.searcherTypes.includes(t.SearcherType.Fuzzy))return null;if(void 0===e.fuzzySearchConfig)throw new Error("Unable to create fuzzy searcher: No fuzzy search config provided.");return this.createFuzzySearcher(e.fuzzySearchConfig)},e.createFuzzySearcher=function(t){var e=new V(t.ngramN,t.transformNgram),r=new $(t.paddingLeft,t.paddingRight,t.paddingMiddle),n=new B(e);return n=new H(n,t.inequalityPenalty),new W(n,r,"normalizationDurationNgrams")},e.tryCreateSubstringSearcher=function(e){if(!e.searcherTypes.includes(t.SearcherType.Substring))return null;if(void 0===e.substringSearchConfig)throw new Error("Unable to create substring searcher: No substring search config provided.");return this.createSubstringSearcher(e.substringSearchConfig)},e.createSubstringSearcher=function(t){return new at(t.suffixArraySeparator)},e.tryCreatePrefixSearcher=function(e,r){if(!e.searcherTypes.includes(t.SearcherType.Prefix))return null;if(void 0===e.substringSearchConfig)throw new Error("Unable to create prefix searcher: No substring search config provided.");return this.createPrefixSearcher(e.substringSearchConfig,r)},e.createPrefixSearcher=function(t,e){return null===e&&(e=this.createSubstringSearcher(t)),new X(e)},e}(),ht=/*#__PURE__*/function(){function t(t,e,r,n,i,a){this.paddingLeft=void 0,this.paddingRight=void 0,this.paddingMiddle=void 0,this.ngramN=void 0,this.transformNgram=void 0,this.inequalityPenalty=void 0,this.paddingLeft=t,this.paddingRight=e,this.paddingMiddle=r,this.ngramN=n,this.transformNgram=i,this.inequalityPenalty=a}return t.createDefaultConfig=function(){return new t("$$","!","!$$",3,function(t){return t.endsWith("$")?null:-1===t.indexOf("$")?t.split("").sort().join(""):t},.05)},t}(),ot=/*#__PURE__*/function(){function t(t){this.objects=[],this.getIndex=0,t&&(this.objects=t)}var e=t.prototype;return e.add=function(t){this.objects.push(t)},e.get=function(){return this.objects[this.getIndex++]},t}(),ut=function(){this.prefixQueries=0,this.substringQueries=0,this.transpositionErrors=0},ct=function(t,e){this.query=void 0,this.duration=void 0,this.query=t,this.duration=e},dt=/*#__PURE__*/function(){function t(t,e,r,n,i,a,s,h){this.testParameters=void 0,this.queryCounts=void 0,this.totalDuration=void 0,this.averageDuration=void 0,this.standardDeviation=void 0,this.fastest=void 0,this.slowest=void 0,this.longest=void 0,this.testParameters=t,this.queryCounts=e,this.totalDuration=r,this.averageDuration=n,this.standardDeviation=i,this.fastest=a,this.slowest=s,this.longest=h}return t.Create=function(e,r,n){if(0===n.length)return new t(e,r,0,0,0,new ct("",0),new ct("",0),new ct("",0));var i=n.length,a=this.Sum(n.map(function(t){return t.duration})),s=a/i,h=Math.sqrt(this.Sum(n.map(function(t){return Math.pow(t.duration-s,2)}))/i),o=n.reduce(function(t,e){return t.duration<e.duration?t:e}),u=n.reduce(function(t,e){return t.duration>e.duration?t:e}),c=n.reduce(function(t,e){return t.query.length>e.query.length?t:e});return new t(e,r,a,s,h,o,u,c)},t.Sum=function(t){return t.reduce(function(t,e){return t+e},0)},t}(),ft=function(t,e,r,n){this.testSeed=void 0,this.numberOfQueries=void 0,this.topN=void 0,this.searchers=void 0,this.testSeed=t,this.numberOfQueries=e,this.topN=r,this.searchers=n},mt=/*#__PURE__*/function(){function t(t){this.dynamicSearcher=void 0,this.terms=void 0,this.random=void 0,this.queryCounts=void 0,this.dynamicSearcher=t,this.terms=[],this.random=this.mulberry32(0),this.queryCounts=new ut}var e=t.prototype;return e.run=function(t){console.log("Running performance test with parameters: "+JSON.stringify(t,null,2));var e=[];this.terms=this.dynamicSearcher.getTerms().filter(function(t){return t}),this.random=this.mulberry32(t.testSeed),this.queryCounts=new ut;for(var r=0===this.terms.length?0:t.numberOfQueries,n=0,i=r;n<i;n++){var a=this.GetRandomQueryString(),s=new x(a,t.topN,[].concat(t.searchers)),h=performance.now();this.dynamicSearcher.getMatches(s);var o=performance.now()-h;e.push(new ct(a,o))}return dt.Create(new ft(t.testSeed,r,t.topN,t.searchers),this.queryCounts,e)},e.GetRandomQueryString=function(){var t,e=this.GetRandomTerm();this.RollPercentage(.5)?(t=0,this.queryCounts.prefixQueries++):(t=this.getRandomInteger(0,e.length),this.queryCounts.substringQueries++);var r=this.getRandomInteger(t+1,e.length+1),n=e.substring(t,r);if(n.length<2||this.RollPercentage(.8))return n;var i=this.getRandomInteger(0,n.length-1);return this.queryCounts.transpositionErrors++,n.substring(0,i)+n[i+1]+n[i]+n.substring(i+2)},e.RollPercentage=function(t){return this.random()<t},e.GetRandomTerm=function(){var t=this.getRandomInteger(0,this.terms.length);return this.terms[t]},e.mulberry32=function(t){return function(){t=1831565813+(t|=0)|0;var e=Math.imul(t^t>>>15,1|t);return(((e=e+Math.imul(e^e>>>7,61|e)^e)^e>>>14)>>>0)/4294967296}},e.getRandomInteger=function(t,e){return Math.floor(this.random()*(e-t)+t)},t}(),lt=/*#__PURE__*/function(){function t(){this.terms=void 0,this.terms=[]}var e=t.prototype;return e.index=function(t){return this.terms=t,new d},e.getMatches=function(t){for(var e=[],r=0,n=this.terms.length;r<n;r++)this.terms[r]===t.string&&e.push(new R(r,1));return new P(e,t,new d)},e.save=function(t){t.add(this.terms)},e.load=function(t){this.terms=t.get()},t}(),gt=/*#__PURE__*/function(){function t(t){this.suffixArraySeparator=void 0,this.suffixArraySeparator=t}return t.createDefaultConfig=function(){return new t("$")},t}(),yt=/*#__PURE__*/function(){function e(t,e,r,n,i,a){this.searcherTypes=void 0,this.maxQueryLength=void 0,this.sortOrder=void 0,this.normalizerConfig=void 0,this.fuzzySearchConfig=void 0,this.substringSearchConfig=void 0,this.searcherTypes=t,this.maxQueryLength=e,this.sortOrder=r,this.normalizerConfig=n,this.fuzzySearchConfig=i,this.substringSearchConfig=a}return e.createDefaultConfig=function(){return new e([t.SearcherType.Fuzzy,t.SearcherType.Substring,t.SearcherType.Prefix],150,t.SortOrder.QualityAndMatchedString,J.createDefaultConfig(),ht.createDefaultConfig(),gt.createDefaultConfig())},e}(),vt=/*#__PURE__*/function(){function t(){}return t.createSearcher=function(t){var e=st.createSearcher(t),r=st.createSearcher(t),n=new z(t.maxQueryLength,e,r);return new I(n)},t.createDefaultSearcher=function(){var t=yt.createDefaultConfig();return this.createSearcher(t)},t}();t.ArrayUtilities=e,t.CharacterNormalizer=N,t.Config=yt,t.DefaultDynamicSearcher=z,t.DefaultEntitySearcher=E,t.DefaultNormalizer=F,t.DistinctSearcher=k,t.EntityMatch=b,t.EntityResult=g,t.EntitySearcherFactory=st,t.FastEntitySearcher=G,t.FuzzySearchConfig=ht,t.FuzzySearcher=v,t.FuzzySearcherImpl=B,t.GenericNormalizer=q,t.HashUtilities=r,t.InequalityPenalizingSearcher=H,t.InvertedIndex=j,t.LatinReplacements=_,t.LiteralSearcher=lt,t.Match=R,t.Memento=ot,t.Meta=d,t.MetaMerger=f,t.MultiNormalizer=O,t.NgramComputer=V,t.NgramNormalizer=$,t.NormalizationResult=A,t.NormalizerConfig=J,t.NormalizingSearcher=W,t.PerformanceTest=mt,t.PrefixSearcher=S,t.PrefixSearcherImpl=X,t.QualityComputer=U,t.Query=x,t.QueryCounts=ut,t.RemovalResult=w,t.Report=dt,t.Result=P,t.ResultMerger=T,t.SanitizingNormalizer=Q,t.SearchState=C,t.SearcherFactory=vt,t.SearcherSpec=y,t.SearcherSwitch=Y,t.SortingEntitySearcher=Z,t.SortingSearcher=tt,t.StringComparison=et,t.StringSearchQuery=M,t.StringUtilities=m,t.SubstringSearchConfig=gt,t.SubstringSearcher=p,t.SuffixArray=rt,t.SuffixArraySearcher=at,t.TermIds=L,t.TestRunParameters=ft,t.TimedQuery=ct,t.TimingDynamicSearcher=I,t.UsableSearchers=l,t.VariationNormalizer=D});
//# sourceMappingURL=fuzzy-search.umd.js.map
